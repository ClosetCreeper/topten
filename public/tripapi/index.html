<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Top 10 Trip</title>
<style>
  body { font-family: sans-serif; margin: 20px; background: #f2f2f2; }
  h1 { color: #333; }
  .category { margin-bottom: 20px; }
  .photo { max-width: 200px; margin: 5px; display: inline-block; }
</style>
</head>
<body>
<h1>Trip Details</h1>
<div id="trip-info">Loading...</div>

<script>
async function loadTrip(tripId) {
  try {
    // Adjusted fetch path for Vercel API routes
    const res = await fetch(`/api/tripapi?trip=${tripId}`);
    const data = await res.json();

    if (data.error) {
      document.getElementById('trip-info').textContent = data.error;
      return;
    }

    let html = `<p><strong>User:</strong> ${data.username}</p>`;
    html += `<p><strong>Trip:</strong> ${data.tripName}</p>`;
    html += `<p><strong>Date:</strong> ${data.tripDate || 'N/A'}</p>`;
    html += `<p><strong>Miles Walked:</strong> ${data.milesWalked}</p>`;
    html += `<p><strong>Photos:</strong> ${data.photoCount}</p>`;

    data.categories.forEach(cat => {
      html += `<div class="category"><h3>${cat.categoryName}</h3>`;
      cat.photoURLs.forEach((url, i) => {
        html += `<div class="photo">
                  <img src="data:image/jpeg;base64,${url}" width="150" />
                  <p>${cat.captions[i]}</p>
                 </div>`;
      });
      html += `</div>`;
    });

    document.getElementById('trip-info').innerHTML = html;
  } catch (err) {
    document.getElementById('trip-info').textContent = 'Error loading trip: ' + err.message;
    console.error(err);
  }
}

// Example trip ID
loadTrip('EA35C155-F2C3-4478-9B81-279DA9CAAF6A');
</script>
</body>
</html>
