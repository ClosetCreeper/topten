<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Top 10 Trip Viewer</title>
<style>
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; }
  .trip-card { background: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); padding: 20px; max-width: 600px; margin: 0 auto; }
  h1 { margin-top: 0; }
  .category { margin-top: 15px; }
  .photos img { max-width: 100px; margin-right: 10px; margin-bottom: 10px; border-radius: 8px; }
</style>
</head>
<body>

<div class="trip-card" id="tripCard">
  <h1>Loading trip...</h1>
</div>

<script>
async function loadTrip() {
  const tripId = new URLSearchParams(window.location.search).get('trip');
  if (!tripId) return document.getElementById('tripCard').innerHTML = '<p>No trip specified.</p>';

  try {
    const res = await fetch(`https://topten.keyninestudios.com/api/tripapi?trip=${tripId}`);
    const data = await res.json();

    const container = document.getElementById('tripCard');
    container.innerHTML = `
      <h1>${data.tripName}</h1>
      <p><strong>Date:</strong> ${data.tripDate}</p>
      <p><strong>Miles Walked:</strong> ${data.milesWalked}</p>
      <p><strong>Photo Count:</strong> ${data.photoCount}</p>
      <h2>Categories</h2>
      ${data.categories.map(cat => `
        <div class="category">
          <h3>${cat.categoryName}</h3>
          <div class="photos">
            ${cat.photoURLs.map((url, i) => `<img src="${url}" alt="${cat.captions[i] || ''}">`).join('')}
          </div>
        </div>
      `).join('')}
    `;
  } catch(err) {
    console.error(err);
    document.getElementById('tripCard').innerHTML = '<p>Error loading trip.</p>';
  }
}

window.onload = loadTrip;
</script>

</body>
</html>
